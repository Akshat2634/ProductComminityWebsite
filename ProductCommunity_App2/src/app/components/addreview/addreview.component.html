<div class="container">
  <div class="card">
    <a
      (click)="goBackToProductDetails()"
      routerLink="/productdetails"
      class="back-button"
      mat-raised-button
      color="accent"
    >
      Back to Product Details
    </a>
    <h1>Add Review</h1>
    <div class="product-details">
      <mat-form-field class="example-full-width field" appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput [(ngModel)]="productName" readonly />
      </mat-form-field>
      <table class="example-full-width" cellspacing="0">
        <tr>
          <td class="form-cell">
            <mat-form-field
              class="example-full-width field"
              appearance="outline"
            >
              <mat-label>Brand</mat-label>
              <input matInput [(ngModel)]="productBrand" readonly />
            </mat-form-field>
          </td>
          <td class="form-cell">
            <mat-form-field
              class="example-full-width field"
              appearance="outline"
            >
              <mat-label>Product Code</mat-label>
              <input matInput [(ngModel)]="productCode" readonly />
            </mat-form-field>
          </td>
        </tr>
      </table>
    </div>

    <div class="review-form">
      <form [formGroup]="reviewForm" (ngSubmit)="postReview()">
        <mat-form-field class="example-full-width">
          <textarea
            matInput
            placeholder="Your review (min. 20 characters and max 400 characters)"
            formControlName="comment"
            required
          ></textarea>
          <mat-error *ngIf="reviewForm.get('comment')?.hasError('required')">
            Comment is required.
          </mat-error>
          <mat-error *ngIf="reviewForm.get('comment')?.hasError('minlength')">
            Comment must be at least 20 characters long.
          </mat-error>
          <mat-error *ngIf="reviewForm.get('comment')?.hasError('maxlength')">
            Comment cannot exceed 400 characters.
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Rating</mat-label>
          <mat-select formControlName="rating" required>
            <mat-option value="1">1</mat-option>
            <mat-option value="2">2</mat-option>
            <mat-option value="3">3</mat-option>
            <mat-option value="4">4</mat-option>
            <mat-option value="5">5</mat-option>
          </mat-select>
          <mat-error *ngIf="reviewForm.get('rating')?.hasError('required')">
            Rating is required.
          </mat-error>
        </mat-form-field>

        <button
          class="postReview"
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="reviewForm.invalid"
        >
          Post Review
        </button>
      </form>
    </div>
  </div>
</div>
